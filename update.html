<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>info.json Updater</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body { background:#0f0f0f; color:#eee; font-family:sans-serif; padding:15px }
h2 { color:#00ff99 }
input, button {
  width:100%; padding:10px; margin:5px 0;
  background:#1e1e1e; color:#fff; border:1px solid #333;
}
button { background:#00ff99; color:#000; font-weight:bold }
.card { border:1px solid #333; padding:10px; margin:10px 0 }
.version { border-left:3px solid #00ff99; padding-left:8px; margin:5px 0 }
</style>
</head>
<body>

<h2>üåê Load info.json from GitHub</h2>
<input id="githubUrl" placeholder="Paste RAW GitHub JSON URL">
<button onclick="loadFromGitHub()">Load JSON</button>

<div id="games"></div>

<h2>‚ûï Add New Game</h2>
<input id="gname" placeholder="Enter Game Name">
<input id="gpackage" placeholder="Enter Package Name">
<input id="gdate" type="date" placeholder="Release Date">
<input id="gversions" type="number" placeholder="How many Versions">
<button onclick="addGame()">Add Game</button>

<button onclick="downloadJSON()">‚¨á Download info.json</button>

<script>
let data = { apps: [] };

function loadFromGitHub() {
  const url = githubUrl.value;
  fetch(url)
    .then(r => r.json())
    .then(json => {
      data = json;
      if (!data.apps) data.apps = [];
      render();
    })
    .catch(() => alert("Invalid GitHub RAW URL"));
}

function render() {
  const wrap = document.getElementById("games");
  wrap.innerHTML = "<h2>üì¶ Existing Games (Old + New)</h2>";

  data.apps.forEach((g, i) => {
    const div = document.createElement("div");
    div.className = "card";

    div.innerHTML = `
      <input value="${g.name || ''}" placeholder="Game Name">
      <input value="${g.package || ''}" placeholder="Package">
      <input type="date" value="${g.releaseDate || ''}">
      <div id="v${i}"></div>
      <button onclick="addVersion(${i})">Add Version</button>
    `;
    wrap.appendChild(div);

    const inputs = div.querySelectorAll("input");
    inputs[0].onchange = e => g.name = e.target.value;
    inputs[1].onchange = e => g.package = e.target.value;
    inputs[2].onchange = e => g.releaseDate = e.target.value;

    g.versions = g.versions || [];
    const vwrap = div.querySelector(`#v${i}`);
    g.versions.forEach(v => {
      const vdiv = document.createElement("div");
      vdiv.className = "version";
      vdiv.innerHTML = `
        <input value="${v.ver || ''}" placeholder="Version">
        <input value="${v.url || ''}" placeholder="Download Link">
      `;
      vwrap.appendChild(vdiv);

      const vin = vdiv.querySelectorAll("input");
      vin[0].onchange = e => v.ver = e.target.value;
      vin[1].onchange = e => v.url = e.target.value;
    });
  });
}

function addVersion(i) {
  data.apps[i].versions.push({ ver:"", url:"" });
  render();
}

function addGame() {
  const game = {
    id: "g" + (data.apps.length + 1),
    name: gname.value,
    package: gpackage.value,
    releaseDate: gdate.value,
    versions: []
  };

  for (let i = 0; i < (+gversions.value || 0); i++) {
    game.versions.push({ ver:"", url:"" });
  }

  data.apps.push(game); // ‚úÖ MERGE (old data safe)
  render();
}

function downloadJSON() {
  const blob = new Blob([JSON.stringify(data, null, 2)], {type:"application/json"});
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "info.json";
  a.click();
}
</script>

</body>
</html>
