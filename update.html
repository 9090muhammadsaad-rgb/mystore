<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Game JSON Updater</title>
<style>
body { font-family: Arial; background:#111; color:#eee; padding:20px }
h2 { color:#0f9 }
input, button, textarea {
  width:100%; margin:5px 0; padding:8px;
  background:#222; color:#fff; border:1px solid #444;
}
button { cursor:pointer; background:#0f9; color:#000; font-weight:bold }
.card { border:1px solid #333; padding:10px; margin:10px 0 }
.version { border-left:3px solid #0f9; padding-left:10px; margin:5px 0 }
</style>
</head>
<body>

<h2>ðŸ“‚ Load info.json</h2>
<input type="file" id="fileInput">

<div id="games"></div>

<h2>âž• Add New Game</h2>
<input id="gname" placeholder="Enter Game Name">
<input id="gpackage" placeholder="Enter Package Name">
<input id="gversions" type="number" placeholder="How many Versions?">
<button onclick="addGame()">Add New Game</button>

<button onclick="downloadJSON()">â¬‡ Download Updated info.json</button>

<script>
let data = { apps: [] };

document.getElementById("fileInput").addEventListener("change", e => {
  const reader = new FileReader();
  reader.onload = () => {
    data = JSON.parse(reader.result);
    render();
  };
  reader.readAsText(e.target.files[0]);
});

function render() {
  const wrap = document.getElementById("games");
  wrap.innerHTML = "<h2>ðŸ“œ Existing Games (Oldest First)</h2>";
  data.apps.forEach((g, i) => {
    const div = document.createElement("div");
    div.className = "card";
    div.innerHTML = `
      <input value="${g.name}" onchange="g.name=this.value">
      <input value="${g.package || ''}" onchange="g.package=this.value">
      <div id="v${i}"></div>
      <button onclick="addVersion(${i})">Add Version</button>
    `;
    wrap.appendChild(div);

    const vwrap = div.querySelector(`#v${i}`);
    g.versions = g.versions || [];
    g.versions.forEach(v => {
      const vdiv = document.createElement("div");
      vdiv.className = "version";
      vdiv.innerHTML = `
        <input value="${v.ver || ''}" placeholder="Version">
        <input value="${v.url || ''}" placeholder="Download Link">
      `;
      vwrap.appendChild(vdiv);

      const inputs = vdiv.querySelectorAll("input");
      inputs[0].onchange = e => v.ver = e.target.value;
      inputs[1].onchange = e => v.url = e.target.value;
    });
  });
}

function addVersion(i) {
  data.apps[i].versions.push({ ver:"", url:"" });
  render();
}

function addGame() {
  const name = gname.value;
  const pkg = gpackage.value;
  const count = +gversions.value || 0;

  const game = {
    id: "g" + (data.apps.length + 1),
    name,
    package: pkg,
    versions: []
  };

  for (let i = 0; i < count; i++) {
    game.versions.push({ ver:"", url:"" });
  }

  data.apps.push(game);
  render();
}

function downloadJSON() {
  const blob = new Blob([JSON.stringify(data, null, 2)], {type:"application/json"});
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "info.json";
  a.click();
}
</script>

</body>
</html>
