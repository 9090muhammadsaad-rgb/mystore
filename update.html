<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Game JSON Updater</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: #0f172a;
  color: #e5e7eb;
  padding: 20px;
}
h1 { color: #38bdf8; }

.container {
  display: flex;
  gap: 20px;
}

.list, .editor {
  background: #020617;
  padding: 15px;
  border-radius: 10px;
  width: 50%;
  max-height: 85vh;
  overflow: auto;
}

.game {
  padding: 10px;
  border-bottom: 1px solid #1e293b;
  cursor: pointer;
}
.game:hover {
  background: #020617;
}

input, textarea, button {
  width: 100%;
  margin: 6px 0;
  padding: 8px;
  border-radius: 6px;
  border: none;
}

button {
  background: #38bdf8;
  color: #020617;
  font-weight: bold;
  cursor: pointer;
}
button:hover { opacity: 0.9; }

.version {
  border: 1px dashed #334155;
  padding: 8px;
  margin: 5px 0;
}
</style>
</head>

<body>

<h1>ğŸ® Game JSON Update Panel</h1>

<div class="container">

  <!-- OLD GAMES LIST -->
  <div class="list">
    <h3>ğŸ“œ Oldest â†’ Newest Games</h3>
    <div id="gameList"></div>
    <button onclick="newGame()">â• Add New Game</button>
  </div>

  <!-- EDITOR -->
  <div class="editor">
    <h3>âœï¸ Edit / Add Game</h3>

    <input id="gid" placeholder="Game ID (g10 etc)">
    <input id="gname" placeholder="Enter Game Name">
    <input id="gpackage" placeholder="Enter Package Name">

    <h4>Versions</h4>
    <div id="versions"></div>

    <button onclick="addVersion()">â• Add Version</button>
    <button onclick="saveGame()">ğŸ’¾ Save / Update Game</button>

    <h4>ğŸ“¦ Updated JSON</h4>
    <textarea id="output" rows="10"></textarea>
  </div>

</div>

<script>
let data = {
  trending_ids: ["g1"],
  apps: []
};

function renderList() {
  const list = document.getElementById("gameList");
  list.innerHTML = "";
  data.apps.forEach((g, i) => {
    const d = document.createElement("div");
    d.className = "game";
    d.innerText = (i+1) + ". " + g.name;
    d.onclick = () => editGame(g);
    list.appendChild(d);
  });
}

function newGame() {
  document.getElementById("gid").value = "";
  document.getElementById("gname").value = "";
  document.getElementById("gpackage").value = "";
  document.getElementById("versions").innerHTML = "";
}

function editGame(g) {
  document.getElementById("gid").value = g.id;
  document.getElementById("gname").value = g.name;
  document.getElementById("gpackage").value = g.package || "";
  document.getElementById("versions").innerHTML = "";

  (g.versions || []).forEach(v => {
    addVersion(v.ver, v.url);
  });
}

function addVersion(ver="", url="") {
  const box = document.createElement("div");
  box.className = "version";
  box.innerHTML = `
    <input placeholder="Version" value="${ver}">
    <input placeholder="Download Link" value="${url}">
  `;
  document.getElementById("versions").appendChild(box);
}

function saveGame() {
  const id = gid.value;
  const name = gname.value;
  const pkg = gpackage.value;

  let versions = [];
  document.querySelectorAll(".version").forEach(v => {
    versions.push({
      ver: v.children[0].value,
      url: v.children[1].value
    });
  });

  let game = data.apps.find(g => g.id === id);
  if (!game) {
    game = { id };
    data.apps.push(game);
  }

  game.name = name;
  game.package = pkg;
  game.versions = versions;

  renderList();
  output.value = JSON.stringify(data, null, 2);
}

renderList();
</script>

</body>
  </html>
