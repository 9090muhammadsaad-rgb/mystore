<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>APP / Game Store</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{margin:0;font-family:Arial;background:#0b1c2d;color:white}
header{position:sticky;top:0;z-index:10;background:rgba(15,23,42,.95);padding:12px}
h2{margin:5px 0}
input,select{
  width:100%;padding:10px;border-radius:10px;border:none;margin:5px 0
}
.tabs button{
  padding:8px 16px;margin:4px;border:none;border-radius:20px;
  cursor:pointer;transition:.3s
}
.tabs button.active{background:#2563eb;color:white}
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(160px,1fr));
  gap:15px;padding:12px
}
.card{
  background:rgba(255,255,255,.08);
  border-radius:14px;padding:12px;
  transition:.3s;cursor:pointer
}
.card:hover{transform:translateY(-6px)}
.icon{
  width:60px;height:60px;border-radius:14px;
  display:flex;align-items:center;justify-content:center;
  font-size:22px;font-weight:bold
}
.game .icon{background:#2563eb}
.app .icon{background:linear-gradient(45deg,#22c55e,#3b82f6)}
.download{
  width:100%;padding:8px;margin-top:6px;
  border:none;border-radius:10px;
  background:linear-gradient(45deg,#22c55e,#3b82f6);
  color:white;font-weight:bold;
  cursor:pointer;transition:.3s
}
.download:hover{transform:scale(1.05)}
.badge{font-size:12px;color:#cbd5e1}
</style>
</head>

<body>

<header>
  <h2>APP / Game Store</h2>

  <div class="tabs">
    <button class="active" onclick="setType('All',this)">All</button>
    <button onclick="setType('Game',this)">Games</button>
    <button onclick="setType('App',this)">Apps</button>
  </div>

  <input id="search" placeholder="Search or owner:(Garena)">

  <select id="category"></select>

  <select id="sort">
    <option value="new">Newest First</option>
    <option value="old">Oldest First</option>
    <option value="big">Largest Size</option>
    <option value="small">Smallest Size</option>
  </select>
</header>

<div class="grid" id="list"></div>

<script>
let DATA=[],TYPE="All";

fetch("info.json").then(r=>r.json()).then(d=>{
  DATA=d.games;
  loadCategories();
  render();
});

function loadCategories(){
  let cats=new Set();
  DATA.forEach(g=>g.categories.forEach(c=>cats.add(c)));
  let sel=document.getElementById("category");
  sel.innerHTML='<option value="All">All Categories</option>';
  cats.forEach(c=>sel.innerHTML+=`<option>${c}</option>`);
}

function setType(t,btn){
  TYPE=t;
  document.querySelectorAll(".tabs button").forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");
  render();
}

function render(){
  let list=[...DATA];

  if(TYPE!=="All") list=list.filter(g=>g.type===TYPE);

  let q=search.value.toLowerCase();
  if(q.startsWith("owner:")){
    let o=q.split(":")[1];
    list=list.filter(g=>g.owner.toLowerCase().includes(o));
  }else if(q) list=list.filter(g=>g.name.toLowerCase().includes(q));

  if(category.value!=="All")
    list=list.filter(g=>g.categories.includes(category.value));

  if(sort.value==="new") list.sort((a,b)=>new Date(b.lastUpdate)-new Date(a.lastUpdate));
  if(sort.value==="old") list.sort((a,b)=>new Date(a.releaseDate)-new Date(b.releaseDate));
  if(sort.value==="big") list.sort((a,b)=>b.sizeMB-a.sizeMB);
  if(sort.value==="small") list.sort((a,b)=>a.sizeMB-b.sizeMB);

  listDiv.innerHTML=list.map(card).join("");
}

function card(g){
  return `
  <div class="card ${g.type.toLowerCase()}">
    <div class="icon">${g.name[0]}</div>
    <b>${g.name}</b>
    <div class="badge">${g.categories.join(", ")}</div>
    <div class="badge">${g.sizeMB} MB â€¢ ${g.country}</div>
    <button class="download">
      ${g.available?"Download":"Coming Soon"}
    </button>
  </div>`;
}

search.oninput=render;
category.onchange=render;
sort.onchange=render;
</script>

</body>
</html>
