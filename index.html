<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Faizan Store Pro | Instant Load</title>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root { --p-green: #01875f; --p-bg: #ffffff; --p-txt: #202124; --p-card: #ffffff; --p-border: #e8eaed; --p-grey: #5f6368; --p-surface: #f8f9fa; }
        [data-theme="dark"] { --p-bg: #121212; --p-txt: #e8eaed; --p-card: #1e1e1e; --p-border: #333; --p-surface: #2d2d2d; }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Google Sans', sans-serif; -webkit-tap-highlight-color: transparent; }
        body { background: var(--p-bg); color: var(--p-txt); overflow-x: hidden; transition: background 0.2s; }

        /* HEADER */
        header { position: sticky; top: 0; background: var(--p-bg); z-index: 1000; padding: 12px 16px; border-bottom: 1px solid var(--p-border); display: flex; align-items: center; gap: 12px; }
        .search-wrapper { flex: 1; position: relative; display: flex; align-items: center; background: var(--p-surface); border-radius: 24px; padding: 0 15px; }
        .search-box { width: 100%; border: none; background: transparent; padding: 10px; font-size: 15px; outline: none; color: var(--p-txt); }
        .sort-icon { cursor: pointer; font-size: 22px; user-select: none; }

        /* MAIN APP GRID */
        .main-container { max-width: 1000px; margin: 0 auto; padding: 16px; }
        .section-title { font-size: 18px; font-weight: 700; margin: 20px 0 15px; display: flex; justify-content: space-between; align-items: center; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(105px, 1fr)); gap: 20px; }
        .app-item { cursor: pointer; transition: 0.2s; }
        .app-item:active { transform: scale(0.95); }
        .app-item img { width: 100%; aspect-ratio: 1/1; border-radius: 20%; object-fit: cover; box-shadow: 0 1px 3px rgba(0,0,0,0.1); border: 1px solid var(--p-border); }
        .app-name { font-size: 12px; font-weight: 500; margin-top: 8px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .app-sub { font-size: 10px; color: var(--p-grey); }

        /* DETAILS OVERLAY (PLAY STORE FEEL) */
        #details-overlay { position: fixed; inset: 0; background: var(--p-bg); z-index: 5000; display: none; overflow-y: auto; animation: slideIn 0.3s ease-out; }
        @keyframes slideIn { from { transform: translateY(100px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        
        .d-header { position: sticky; top: 0; background: var(--p-bg); padding: 12px 16px; display: flex; align-items: center; border-bottom: 1px solid var(--p-border); z-index: 10; }
        .back-btn { font-size: 24px; border: none; background: none; cursor: pointer; color: var(--p-txt); margin-right: 15px; }

        .d-hero { display: flex; padding: 20px; gap: 20px; }
        .d-hero img { width: 88px; height: 88px; border-radius: 22%; object-fit: cover; }
        .d-info h2 { font-size: 22px; font-weight: 700; }
        .d-info p { color: var(--p-green); font-weight: 500; font-size: 14px; }

        /* STATS ROW */
        .stats-row { display: flex; justify-content: space-around; padding: 10px 0; border-top: 1px solid var(--p-border); border-bottom: 1px solid var(--p-border); margin: 0 20px; text-align: center; }
        .stat-item { border-right: 1px solid var(--p-border); flex: 1; }
        .stat-item:last-child { border-right: none; }
        .stat-val { font-weight: 700; font-size: 14px; }
        .stat-lab { font-size: 10px; color: var(--p-grey); }

        /* SCREENSHOTS */
        .d-gallery { display: flex; gap: 12px; overflow-x: auto; padding: 20px; scrollbar-width: none; }
        .d-gallery::-webkit-scrollbar { display: none; }
        .d-gallery img, .d-gallery video { height: 170px; min-width: 280px; border-radius: 12px; object-fit: cover; background: #000; }

        .d-desc { padding: 0 20px 20px; font-size: 14px; color: var(--p-grey); line-height: 1.5; }

        /* INSTALL BUTTONS */
        .install-box { padding: 0 20px 30px; }
        .btn-main { display: block; width: 100%; padding: 12px; border-radius: 8px; text-align: center; text-decoration: none; font-weight: 700; margin-bottom: 10px; transition: 0.2s; }
        .btn-green { background: var(--p-green); color: white; }
        .btn-outline { border: 1px solid var(--p-border); color: var(--p-green); background: var(--p-card); }

        /* RECOMMENDED SECTION */
        .rec-section { padding: 20px; background: var(--p-surface); border-top: 1px solid var(--p-border); }
        .rec-grid { display: flex; gap: 15px; overflow-x: auto; padding: 10px 0; scrollbar-width: none; }

        /* BOTTOM NAV */
        .bottom-nav { position: fixed; bottom: 0; width: 100%; background: var(--p-card); display: flex; justify-content: space-around; padding: 10px 0; border-top: 1px solid var(--p-border); z-index: 2000; }
        .nav-link { border: none; background: none; color: var(--p-grey); font-weight: 500; font-size: 13px; cursor: pointer; flex: 1; }
        .nav-link.active { color: var(--p-green); }

        /* SETTINGS DRAWER */
        #settings-drawer { position: fixed; bottom: -100%; left: 0; width: 100%; background: var(--p-card); z-index: 6000; padding: 25px; border-radius: 28px 28px 0 0; transition: 0.3s; box-shadow: 0 -10px 30px rgba(0,0,0,0.2); }
        #settings-drawer.open { bottom: 0; }
        .overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.4); z-index: 5500; display: none; }

        .chip-group { margin-bottom: 20px; }
        .chip { display: inline-block; padding: 8px 16px; background: var(--p-surface); border-radius: 20px; margin: 4px; font-size: 12px; cursor: pointer; border: 1px solid var(--p-border); }
        .chip.active { background: #e6f4ea; color: var(--p-green); border-color: var(--p-green); }
    </style>
</head>
<body data-theme="light">

    <header>
        <div class="search-wrapper">
            <input type="text" id="search-input" class="search-box" placeholder="Search for apps & games">
        </div>
        <div class="sort-icon" onclick="toggleSettings(true)">üîò</div>
    </header>

    <div class="main-container">
        <div class="section-title">
            <span id="list-label">Editor's Choice</span>
            <span style="font-size: 12px; color: var(--p-green);" onclick="resetStore()">View All</span>
        </div>
        <div class="grid" id="main-app-grid"></div>
    </div>

    <div id="details-overlay">
        <div class="d-header">
            <button class="back-btn" onclick="closeDetails()">‚Üê</button>
            <span id="d-top-title" style="font-weight:700">App Details</span>
        </div>
        <div id="d-content"></div>
        
        <div class="rec-section">
            <h4 style="margin-bottom:10px;">Recommended for you</h4>
            <div class="rec-grid" id="rec-grid"></div>
        </div>
    </div>

    <div class="overlay" id="drawer-overlay" onclick="toggleSettings(false)"></div>
    <div id="settings-drawer">
        <h3 style="margin-bottom:15px">Settings</h3>
        <div class="chip-group">
            <p style="font-size:12px; margin-bottom:8px">Appearance</p>
            <div class="chip" onclick="applyTheme('light')">Light Theme</div>
            <div class="chip" onclick="applyTheme('dark')">Dark Theme</div>
        </div>
        <div class="chip-group">
            <p style="font-size:12px; margin-bottom:8px">Sort By</p>
            <div class="chip" onclick="sortItems('new')">Newest First</div>
            <div class="chip" onclick="sortItems('size-h')">Highest Size</div>
            <div class="chip" onclick="sortItems('size-l')">Lowest Size</div>
        </div>
        <div class="chip-group">
            <p style="font-size:12px; margin-bottom:8px">Platform</p>
            <div class="chip" onclick="filterOS('android')">Android Only</div>
            <div class="chip" onclick="filterOS('windows')">Windows Only</div>
        </div>
        <button onclick="toggleSettings(false)" style="width:100%; padding:15px; border:none; background:var(--p-surface); border-radius:12px; font-weight:700">Close</button>
    </div>

    <nav class="bottom-nav">
        <button class="nav-link active" onclick="tabFilter('all', this)">All</button>
        <button class="nav-link" onclick="tabFilter('game', this)">Games</button>
        <button class="nav-link" onclick="tabFilter('app', this)">Apps</button>
        <button class="nav-link" onclick="tabFilter('tool', this)">Tools</button>
    </nav>

    <script>
        let fullData = [];
        let displayData = [];

        async function initStore() {
            try {
                const res = await fetch('info.json?cache=' + Math.random());
                const data = await res.json();
                fullData = data.apps;
                displayData = fullData.filter(a => data.trending_ids.includes(a.id));
                renderMainGrid(displayData);
            } catch (e) { console.error("Could not load Play Store data."); }
        }

        function renderMainGrid(list) {
            const grid = document.getElementById('main-app-grid');
            grid.innerHTML = list.map(a => `
                <div class="app-item" onclick="showDetails('${a.id}')">
                    <img src="${a.icon}" loading="lazy">
                    <div class="app-name">${a.name}</div>
                    <div class="app-sub">${a.size} ‚Ä¢ ${a.category}</div>
                </div>
            `).join('');
        }

        function showDetails(id) {
            const a = fullData.find(x => x.id === id);
            document.getElementById('d-top-title').innerText = a.name;
            const container = document.getElementById('d-content');
            
            container.innerHTML = `
                <div class="d-hero">
                    <img src="${a.icon}">
                    <div class="d-info">
                        <h2>${a.name}</h2>
                        <p>${a.owner || 'Verified Developer'}</p>
                    </div>
                </div>

                <div class="stats-row">
                    <div class="stat-item"><div class="stat-val">4.8‚òÖ</div><div class="stat-lab">Review</div></div>
                    <div class="stat-item"><div class="stat-val">${a.size}</div><div class="stat-lab">Download Size</div></div>
                    <div class="stat-item"><div class="stat-val">E</div><div class="stat-lab">Rated for 3+</div></div>
                </div>

                <div class="d-gallery">
                    ${a.media.map(m => m.endsWith('.mp4') ? `<video src="${m}" controls muted></video>` : `<img src="${m}">`).join('')}
                </div>

                <div class="install-box">
                    ${a.platforms.android ? a.platforms.android.map(l => `<a href="${l.url}" class="btn-main btn-green">Install (${l.name})</a>`).join('') : ''}
                    ${a.platforms.windows ? `<a href="${a.platforms.windows}" class="btn-main btn-outline">Download for Windows</a>` : ''}
                </div>

                <div class="d-desc">
                    <h4 style="color:var(--p-txt); margin-bottom:8px">About this ${a.type}</h4>
                    <p>${a.description || 'No detailed description provided for this specific mod version.'}</p>
                </div>
            `;

            // RENDER RECOMMENDED ITEMS
            const recGrid = document.getElementById('rec-grid');
            const recommendedItems = fullData.filter(x => a.recommended && a.recommended.includes(x.id));
            recGrid.innerHTML = recommendedItems.map(r => `
                <div class="app-item" style="min-width:90px" onclick="showDetails('${r.id}')">
                    <img src="${r.icon}" style="width:90px; height:90px;">
                    <div class="app-name">${r.name}</div>
                </div>
            `).join('');

            document.getElementById('details-overlay').style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function closeDetails() {
            document.getElementById('details-overlay').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // NAVIGATION & FILTERS
        function tabFilter(type, btn) {
            document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
            btn.classList.add('active');
            displayData = type === 'all' ? fullData : fullData.filter(a => a.type === type);
            document.getElementById('list-label').innerText = type.toUpperCase() + "S";
            renderMainGrid(displayData);
        }

        function toggleSettings(open) {
            document.getElementById('settings-drawer').classList.toggle('open', open);
            document.getElementById('drawer-overlay').style.display = open ? 'block' : 'none';
        }

        function applyTheme(t) { document.body.setAttribute('data-theme', t); toggleSettings(false); }

        function sortItems(mode) {
            if(mode === 'size-h') displayData.sort((a,b) => parseFloat(b.size) - parseFloat(a.size));
            if(mode === 'size-l') displayData.sort((a,b) => parseFloat(a.size) - parseFloat(b.size));
            if(mode === 'new') displayData.reverse();
            renderMainGrid(displayData); toggleSettings(false);
        }

        function filterOS(os) {
            displayData = fullData.filter(a => a.platforms && a.platforms[os]);
            renderMainGrid(displayData); toggleSettings(false);
        }

        // SEARCH ENGINE
        document.getElementById('search-input').addEventListener('input', (e) => {
            const v = e.target.value.toLowerCase();
            const results = fullData.filter(a => a.name.toLowerCase().includes(v) || a.category.toLowerCase().includes(v));
            renderMainGrid(results);
        });

        function resetStore() { displayData = fullData; renderMainGrid(fullData); }

        initStore();
    </script>
</body>
</html>
