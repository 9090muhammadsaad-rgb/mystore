<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Faizan Master Store</title>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* CSS VARIABLES & THEMES */
        :root { --ps-green: #01875f; --ps-bg: #ffffff; --ps-txt: #202124; --ps-card: #ffffff; --ps-border: #e8eaed; --ps-grey: #5f6368; --ps-nav: #ffffff; }
        [data-theme="dark"] { --ps-bg: #121212; --ps-txt: #e8eaed; --ps-card: #1e1e1e; --ps-border: #333; --ps-nav: #1e1e1e; }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Google Sans', sans-serif; -webkit-tap-highlight-color: transparent; }
        body { background: var(--ps-bg); color: var(--ps-txt); overflow-x: hidden; transition: 0.3s; }

        /* 1. SPLASH SCREEN */
        #splash { position: fixed; inset: 0; background: #fff; z-index: 9999; display: flex; align-items: center; justify-content: center; transition: 0.8s ease; }
        #splash img { width: 140px; border-radius: 25px; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }

        /* 2. HEADER & SEARCH */
        header { position: sticky; top: 0; background: var(--ps-bg); z-index: 1000; padding: 12px 15px; border-bottom: 1px solid var(--ps-border); display: flex; align-items: center; gap: 10px; }
        .search-box { flex: 1; padding: 12px 20px; background: rgba(128,128,128,0.1); border-radius: 30px; border: none; outline: none; color: var(--ps-txt); font-size: 15px; }
        .sort-btn-main { cursor: pointer; font-size: 24px; padding: 5px; }

        /* 3. APP GRID */
        .container { max-width: 1000px; margin: 15px auto; padding: 0 15px; padding-bottom: 100px; }
        .section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(110px, 1fr)); gap: 18px; }
        .app-card { cursor: pointer; animation: fadeInUp 0.5s ease forwards; text-align: left; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
        .app-card img { width: 100%; aspect-ratio: 1/1; border-radius: 22%; object-fit: cover; border: 1px solid var(--ps-border); }
        .app-card .title { font-size: 13px; font-weight: 500; margin-top: 8px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .app-card .meta { font-size: 11px; color: var(--ps-grey); }

        /* 4. DETAILS PAGE (MODAL) */
        #details-page { position: fixed; inset: 0; background: var(--ps-bg); z-index: 5000; display: none; overflow-y: auto; padding-bottom: 40px; }
        .top-bar { position: sticky; top: 0; background: var(--ps-bg); padding: 15px; display: flex; align-items: center; border-bottom: 1px solid var(--ps-border); z-index: 10; }
        .back-btn { font-size: 26px; border: none; background: none; color: var(--ps-txt); cursor: pointer; margin-right: 15px; }
        
        .hero { display: flex; gap: 18px; padding: 20px; align-items: center; }
        .hero img { width: 85px; height: 85px; border-radius: 20%; object-fit: cover; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .hero h2 { font-size: 22px; line-height: 1.2; }
        .hero p { color: var(--ps-green); font-weight: 500; font-size: 14px; margin-top: 4px; }

        .media-scroller { display: flex; gap: 12px; overflow-x: auto; padding: 10px 20px; scrollbar-width: none; }
        .media-scroller::-webkit-scrollbar { display: none; }
        .media-scroller img, .media-scroller video { height: 180px; min-width: 300px; border-radius: 12px; object-fit: cover; background: #000; }

        .desc-box { padding: 20px; font-size: 14px; line-height: 1.6; color: var(--ps-grey); }
        .dl-section { padding: 0 20px; display: flex; flex-direction: column; gap: 10px; }
        .dl-card { background: rgba(128,128,128,0.05); padding: 15px; border-radius: 12px; border: 1px solid var(--ps-border); }
        .dl-btn { display: block; width: 100%; padding: 14px; border-radius: 8px; text-align: center; text-decoration: none; font-weight: bold; font-size: 14px; margin-top: 8px; }
        .btn-apk { background: var(--ps-green); color: white; }
        .btn-win { background: #3c4043; color: white; }

        /* 5. üîò SETTINGS DRAWER */
        #drawer { position: fixed; bottom: -100%; left: 0; width: 100%; background: var(--ps-card); z-index: 6000; padding: 25px; border-radius: 25px 25px 0 0; transition: 0.4s cubic-bezier(0.4, 0, 0.2, 1); box-shadow: 0 -10px 30px rgba(0,0,0,0.2); }
        #drawer.open { bottom: 0; }
        .drawer-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 5500; display: none; }
        .filter-group { margin-bottom: 20px; }
        .filter-label { font-weight: bold; font-size: 14px; display: block; margin-bottom: 10px; opacity: 0.8; }
        .chip-box { display: flex; flex-wrap: wrap; gap: 8px; }
        .chip { padding: 8px 16px; background: rgba(128,128,128,0.1); border-radius: 20px; font-size: 12px; cursor: pointer; border: 1px solid transparent; }
        .chip.active { background: var(--ps-green); color: white; border-color: var(--ps-green); }

        /* 6. BOTTOM NAV */
        .bottom-nav { position: fixed; bottom: 0; width: 100%; background: var(--ps-nav); display: flex; justify-content: space-around; padding: 12px; border-top: 1px solid var(--ps-border); z-index: 2000; transition: 0.3s; }
        .nav-hide { transform: translateY(100%); }
        .nav-item { border: none; background: none; color: var(--ps-grey); font-weight: 500; cursor: pointer; font-size: 14px; display: flex; flex-direction: column; align-items: center; }
        .nav-item.active { color: var(--ps-green); }
        .nav-item i { font-size: 20px; margin-bottom: 4px; }

        .help-link { display: block; text-align: center; padding: 15px; color: #3498db; font-weight: 500; text-decoration: none; border-top: 1px solid var(--ps-border); margin-top: 10px; }
    </style>
</head>
<body data-theme="light">

    <div id="splash"><img src="1761933069017.jpg" alt="Logo"></div>

    <header id="main-header">
        <input type="text" id="search-bar" class="search-box" placeholder="Search games, mods, tools...">
        <div class="sort-btn-main" onclick="toggleDrawer(true)">üîò</div>
    </header>

    <div class="container">
        <div class="section-header">
            <h3 id="list-title">Trending Mods</h3>
            <span style="font-size: 12px; color: var(--ps-green);" onclick="resetFilters()">Clear All</span>
        </div>
        <div class="grid" id="app-grid"></div>
    </div>

    <div id="details-page">
        <div class="top-bar">
            <button class="back-btn" onclick="closeDetails()">‚Üê</button>
            <span style="font-weight: 500;" id="detail-header-name">Details</span>
        </div>
        <div id="details-content"></div>
    </div>

    <div class="drawer-overlay" id="overlay" onclick="toggleDrawer(false)"></div>
    <div id="drawer">
        <div class="filter-group">
            <span class="filter-label">Display Theme</span>
            <div class="chip-box">
                <div class="chip" id="t-light" onclick="setTheme('light')">Light Mode</div>
                <div class="chip" id="t-dark" onclick="setTheme('dark')">Dark Mode</div>
            </div>
        </div>
        <div class="filter-group">
            <span class="filter-label">Sort Games By</span>
            <div class="chip-box">
                <div class="chip" onclick="sortData('newest')">Recently Added</div>
                <div class="chip" onclick="sortData('size-high')">Largest Size</div>
                <div class="chip" onclick="sortData('size-low')">Smallest Size</div>
            </div>
        </div>
        <div class="filter-group">
            <span class="filter-label">Target Platform</span>
            <div class="chip-box">
                <div class="chip" onclick="filterByOS('android')">Android APK</div>
                <div class="chip" onclick="filterByOS('windows')">Windows EXE</div>
            </div>
        </div>
        <a href="https://example.com" class="help-link">Need Help? Contact Faizan Store</a>
        <button onclick="toggleDrawer(false)" style="width:100%; padding:15px; border:none; background:rgba(128,128,128,0.1); border-radius:12px; font-weight:bold; cursor:pointer; color:var(--ps-txt);">Close Settings</button>
    </div>

    <nav class="bottom-nav" id="bot-nav">
        <button class="nav-item active" onclick="navFilter('all', this)">All</button>
        <button class="nav-item" onclick="navFilter('game', this)">Games</button>
        <button class="nav-item" onclick="navFilter('app', this)">Apps</button>
        <button class="nav-item" onclick="navFilter('tool', this)">Tools</button>
    </nav>

    <script>
        let rawApps = [];
        let activeList = [];
        let currentScroll = 0;

        // Initialize Store
        async function init() {
            try {
                const res = await fetch('info.json?v=' + Date.now());
                const data = await res.json();
                rawApps = data.apps;
                activeList = rawApps.filter(a => data.trending_ids.includes(a.id));

                // 3-Second Splash Timer
                setTimeout(() => {
                    const s = document.getElementById('splash');
                    s.style.opacity = '0';
                    setTimeout(() => s.style.display = 'none', 800);
                    render(activeList);
                }, 3000);
            } catch (e) { console.error("Data failed to load."); }
        }

        // Render Grid
        function render(data) {
            const grid = document.getElementById('app-grid');
            grid.innerHTML = data.length ? data.map(a => `
                <div class="app-card" onclick="openDetails('${a.id}')">
                    <img src="${a.icon}" onerror="this.src='https://via.placeholder.com/150'">
                    <div class="title">${a.name}</div>
                    <div class="meta">${a.size} ‚Ä¢ ${a.category}</div>
                </div>
            `).join('') : '<p style="grid-column:1/-1; text-align:center; padding:40px;">No results found.</p>';
        }

        // Search Logic
        document.getElementById('search-bar').addEventListener('input', (e) => {
            const v = e.target.value.toLowerCase();
            const filtered = rawApps.filter(a => 
                a.name.toLowerCase().includes(v) || 
                (a.keywords && a.keywords.some(k => k.toLowerCase().includes(v)))
            );
            render(filtered);
        });

        // Navigation Logic
        function navFilter(type, btn) {
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            btn.classList.add('active');
            activeList = (type === 'all') ? rawApps : rawApps.filter(a => a.type === type);
            document.getElementById('list-title').innerText = type.toUpperCase() + "S";
            render(activeList);
        }

        // Details Logic
        function openDetails(id) {
            const a = rawApps.find(x => x.id === id);
            document.getElementById('detail-header-name').innerText = a.name;
            const content = document.getElementById('details-content');
            
            content.innerHTML = `
                <div class="hero">
                    <img src="${a.icon}">
                    <div class="hero-info">
                        <h2>${a.name}</h2>
                        <p>${a.owner || 'Official Store'}</p>
                    </div>
                </div>

                <div class="media-scroller">
                    ${a.media && a.media.length ? a.media.map(m => m.endsWith('.mp4') ? `<video src="${m}" controls></video>` : `<img src="${m}">`).join('') : '<p style="padding:20px;">No screenshots available.</p>'}
                </div>

                <div class="desc-box">
                    <h4 style="margin-bottom:8px; color:var(--ps-txt);">About this version</h4>
                    <p>${a.description || 'Verified and scanned for viruses by Faizan Store.'}</p>
                    <div style="margin-top:15px; font-size:12px;"><b>Category:</b> ${a.category} | <b>Version:</b> ${a.ver || '1.0'}</div>
                </div>

                <div class="dl-section">
                    ${a.platforms.android ? a.platforms.android.map(link => `
                        <div class="dl-card">
                            <span style="font-size:12px; font-weight:bold;">${link.name}</span>
                            <a href="${link.url}" class="dl-btn btn-apk">INSTALL APK (${a.size})</a>
                        </div>
                    `).join('') : ''}
                    
                    ${a.platforms.windows ? `
                        <div class="dl-card">
                            <span style="font-size:12px; font-weight:bold;">PC Version</span>
                            <a href="${a.platforms.windows}" class="dl-btn btn-win">DOWNLOAD FOR WINDOWS</a>
                        </div>
                    ` : ''}
                </div>
            `;
            document.getElementById('details-page').style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function closeDetails() {
            document.getElementById('details-page').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Drawer & Theme Logic
        function toggleDrawer(show) {
            document.getElementById('drawer').classList.toggle('open', show);
            document.getElementById('overlay').style.display = show ? 'block' : 'none';
        }

        function setTheme(t) {
            document.body.setAttribute('data-theme', t);
            toggleDrawer(false);
        }

        function sortData(mode) {
            if(mode === 'size-high') activeList.sort((a,b) => parseFloat(b.size) - parseFloat(a.size));
            if(mode === 'size-low') activeList.sort((a,b) => parseFloat(a.size) - parseFloat(b.size));
            if(mode === 'newest') activeList.reverse();
            render(activeList); toggleDrawer(false);
        }

        function filterByOS(os) {
            const filtered = rawApps.filter(a => a.platforms && a.platforms[os]);
            render(filtered); toggleDrawer(false);
        }

        function resetFilters() { activeList = rawApps; render(rawApps); }

        // Hide Nav on Scroll
        window.onscroll = () => {
            const nav = document.getElementById('bot-nav');
            if (window.scrollY > currentScroll && window.scrollY > 100) nav.classList.add('nav-hide');
            else nav.classList.remove('nav-hide');
            currentScroll = window.scrollY;
        };

        init();
    </script>
</body>
</html>
