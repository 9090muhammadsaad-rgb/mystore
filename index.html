<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Faizan Store | Ultra Power</title>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root { --p-green: #01875f; --p-bg: #ffffff; --p-txt: #202124; --p-card: #ffffff; --p-border: #e8eaed; --p-grey: #5f6368; --p-surface: #f1f3f4; }
        [data-theme="dark"] { --p-bg: #121212; --p-txt: #e8eaed; --p-card: #1e1e1e; --p-border: #333; --p-surface: #2d2d2d; }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Google Sans', sans-serif; -webkit-tap-highlight-color: transparent; }
        body { background: var(--p-bg); color: var(--p-txt); overflow-x: hidden; transition: 0.2s; }

        /* HEADER & SEARCH */
        header { position: sticky; top: 0; background: var(--p-bg); z-index: 1000; padding: 10px 15px; border-bottom: 1px solid var(--p-border); display: flex; align-items: center; gap: 10px; }
        .search-container { flex: 1; display: flex; align-items: center; background: var(--p-surface); border-radius: 30px; padding: 0 15px; }
        .search-box { width: 100%; border: none; background: transparent; padding: 12px; font-size: 15px; outline: none; color: var(--p-txt); }
        .btn-settings { cursor: pointer; font-size: 24px; padding: 5px; }

        /* CATEGORY SCROLLER */
        .cat-scroller { display: flex; gap: 10px; overflow-x: auto; padding: 15px; scrollbar-width: none; background: var(--p-bg); }
        .cat-scroller::-webkit-scrollbar { display: none; }
        .cat-chip { padding: 8px 18px; background: var(--p-surface); border: 1px solid var(--p-border); border-radius: 20px; font-size: 13px; white-space: nowrap; cursor: pointer; font-weight: 500; }
        .cat-chip.active { background: #e6f4ea; color: var(--p-green); border-color: var(--p-green); }

        /* MAIN CONTENT */
        .container { max-width: 1000px; margin: 0 auto; padding: 0 15px 100px; }
        .section-label { font-size: 18px; font-weight: 700; margin: 15px 0; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(105px, 1fr)); gap: 20px; }
        .app-item { cursor: pointer; animation: zoomIn 0.3s ease; }
        @keyframes zoomIn { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        .app-item img { width: 100%; aspect-ratio: 1/1; border-radius: 22%; object-fit: cover; border: 1px solid var(--p-border); box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .app-item .name { font-size: 12px; font-weight: 500; margin-top: 8px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .app-item .meta { font-size: 10px; color: var(--p-grey); }

        /* DETAIL VIEW OVERLAY */
        #detail-view { position: fixed; inset: 0; background: var(--p-bg); z-index: 5000; display: none; overflow-y: auto; }
        .d-header { position: sticky; top: 0; background: var(--p-bg); padding: 12px 15px; display: flex; align-items: center; border-bottom: 1px solid var(--p-border); z-index: 10; }
        .d-back { font-size: 26px; border: none; background: none; color: var(--p-txt); cursor: pointer; margin-right: 15px; }

        .d-hero { display: flex; padding: 20px; gap: 20px; align-items: center; }
        .d-hero img { width: 90px; height: 90px; border-radius: 22%; object-fit: cover; }
        .d-info h2 { font-size: 22px; font-weight: 700; }
        .d-info p { color: var(--p-green); font-size: 14px; font-weight: 500; }

        .d-gallery { display: flex; gap: 12px; overflow-x: auto; padding: 10px 20px; scrollbar-width: none; }
        .d-gallery img, .d-gallery video { height: 180px; min-width: 280px; border-radius: 12px; object-fit: cover; background: #000; }

        .d-desc { padding: 20px; font-size: 14px; color: var(--p-grey); line-height: 1.6; }
        
        /* DOWNLOAD BUTTONS */
        .dl-box { padding: 0 20px 20px; }
        .dl-btn { display: block; width: 100%; padding: 14px; border-radius: 8px; text-align: center; text-decoration: none; font-weight: 700; font-size: 14px; margin-bottom: 10px; }
        .btn-apk { background: var(--p-green); color: white; }
        .btn-win { background: #3c4043; color: white; }

        /* RECOMMENDED SECTION */
        .rec-box { background: var(--p-surface); padding: 20px; border-top: 1px solid var(--p-border); }
        .rec-scroll { display: flex; gap: 15px; overflow-x: auto; padding: 10px 0; scrollbar-width: none; }

        /* BOTTOM NAV */
        .bottom-nav { position: fixed; bottom: 0; width: 100%; background: var(--p-card); display: flex; justify-content: space-around; padding: 12px 0; border-top: 1px solid var(--p-border); z-index: 2000; }
        .nav-item { border: none; background: none; color: var(--p-grey); font-weight: 500; cursor: pointer; flex: 1; font-size: 13px; }
        .nav-item.active { color: var(--p-green); }

        /* SETTINGS DRAWER */
        #drawer { position: fixed; bottom: -100%; left: 0; width: 100%; background: var(--p-card); z-index: 6000; padding: 25px; border-radius: 25px 25px 0 0; transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1); box-shadow: 0 -10px 30px rgba(0,0,0,0.2); }
        #drawer.open { bottom: 0; }
        .overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 5500; display: none; }
        .drawer-item { margin-bottom: 20px; }
        .chip { display: inline-block; padding: 8px 16px; background: var(--p-surface); border-radius: 20px; margin: 4px; font-size: 12px; cursor: pointer; border: 1px solid var(--p-border); }
    </style>
</head>
<body data-theme="light">

    <header>
        <div class="search-container">
            <input type="text" id="main-search" class="search-box" placeholder="Search mods, apps, or tools...">
        </div>
        <div class="btn-settings" onclick="toggleDrawer(true)">üîò</div>
    </header>

    <div class="cat-scroller" id="cat-chips">
        <div class="cat-chip active" onclick="filterByCat('All', this)">All</div>
    </div>

    <div class="container">
        <h3 class="section-label" id="list-label">Suggested For You</h3>
        <div class="grid" id="main-grid"></div>
    </div>

    <div id="detail-view">
        <div class="d-header">
            <button class="d-back" onclick="closeDetail()">‚Üê</button>
            <span id="d-top-name" style="font-weight:700">App Details</span>
        </div>
        <div id="d-body"></div>
        
        <div class="rec-box">
            <h4 style="margin-bottom:10px;">You might also like</h4>
            <div class="rec-scroll" id="rec-items"></div>
        </div>
    </div>

    <div class="overlay" id="overlay" onclick="toggleDrawer(false)"></div>
    <div id="drawer">
        <div class="drawer-item">
            <p style="font-size:12px; margin-bottom:8px; font-weight:bold;">Appearance</p>
            <div class="chip" onclick="setTheme('light')">White Mode</div>
            <div class="chip" onclick="setTheme('dark')">Dark Mode</div>
        </div>
        <div class="drawer-item">
            <p style="font-size:12px; margin-bottom:8px; font-weight:bold;">Sort By</p>
            <div class="chip" onclick="sort('new')">Newest</div>
            <div class="chip" onclick="sort('size-h')">Highest Size</div>
            <div class="chip" onclick="sort('size-l')">Lowest Size</div>
        </div>
        <a href="https://example.com" style="display:block; text-align:center; padding:15px; color:var(--p-green); text-decoration:none; font-weight:bold;">Help Center</a>
        <button onclick="toggleDrawer(false)" style="width:100%; padding:15px; border-radius:12px; border:none; background:var(--p-surface); font-weight:bold;">Close</button>
    </div>

    <nav class="bottom-nav">
        <button class="nav-item active" onclick="tab('all', this)">All</button>
        <button class="nav-item" onclick="tab('game', this)">Games</button>
        <button class="nav-item" onclick="tab('app', this)">Apps</button>
        <button class="nav-item" onclick="tab('tool', this)">Tools</button>
    </nav>

    <script>
        let fullData = [];
        let filteredData = [];

        // 1. FETCH DATA INSTANTLY
        async function loadStore() {
            try {
                const res = await fetch('info.json?v=' + Date.now());
                const data = await res.json();
                fullData = data.apps;
                filteredData = fullData;

                // Load categories
                const cats = [...new Set(fullData.map(a => a.category))];
                cats.forEach(c => {
                    const chip = document.createElement('div');
                    chip.className = 'cat-chip';
                    chip.innerText = c;
                    chip.onclick = (e) => filterByCat(c, e.target);
                    document.getElementById('cat-chips').appendChild(chip);
                });

                renderGrid(filteredData);
            } catch (e) { console.error("Error loading JSON"); }
        }

        // 2. RENDER ENGINE
        function renderGrid(list) {
            const grid = document.getElementById('main-grid');
            grid.innerHTML = list.map(a => `
                <div class="app-item" onclick="openDetail('${a.id}')">
                    <img src="${a.icon}" loading="lazy">
                    <div class="name">${a.name}</div>
                    <div class="meta">${a.size} ‚Ä¢ ${a.category}</div>
                </div>
            `).join('');
        }

        // 3. DETAIL & RECOMMENDATION LOGIC
        function openDetail(id) {
            const a = fullData.find(x => x.id === id);
            document.getElementById('d-top-name').innerText = a.name;
            const body = document.getElementById('d-body');
            
            body.innerHTML = `
                <div class="d-hero">
                    <img src="${a.icon}">
                    <div class="d-info">
                        <h2>${a.name}</h2>
                        <p>${a.owner || 'Verified Dev'}</p>
                    </div>
                </div>
                <div class="d-gallery">
                    ${a.media.map(m => m.endsWith('.mp4') ? `<video src="${m}" controls></video>` : `<img src="${m}">`).join('')}
                </div>
                <div class="d-desc">
                    <p>${a.description || 'Verified and updated on Faizan Store.'}</p>
                    <div style="margin-top:10px; font-size:12px;"><b>Size:</b> ${a.size} | <b>Updated:</b> ${a.releaseDate}</div>
                </div>
                <div class="dl-box">
                    ${a.platforms.android ? a.platforms.android.map(l => `<a href="${l.url}" class="dl-btn btn-apk">Download APK (${l.name})</a>`).join('') : ''}
                    ${a.platforms.windows ? `<a href="${a.platforms.windows}" class="dl-btn btn-win">Download for Windows</a>` : ''}
                </div>
            `;

            // Smart Recommendation Logic
            const recs = fullData.filter(x => x.category === a.category && x.id !== a.id);
            document.getElementById('rec-items').innerHTML = recs.map(r => `
                <div class="app-item" style="min-width:90px" onclick="openDetail('${r.id}')">
                    <img src="${r.icon}" style="width:90px; height:90px;">
                    <div class="name">${r.name}</div>
                </div>
            `).join('');

            document.getElementById('detail-view').style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function closeDetail() {
            document.getElementById('detail-view').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // 4. FILTERS & SEARCH
        function filterByCat(c, el) {
            document.querySelectorAll('.cat-chip').forEach(ch => ch.classList.remove('active'));
            el.classList.add('active');
            filteredData = (c === 'All') ? fullData : fullData.filter(a => a.category === c);
            renderGrid(filteredData);
        }

        function tab(t, btn) {
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            btn.classList.add('active');
            filteredData = (t === 'all') ? fullData : fullData.filter(a => a.type === t);
            renderGrid(filteredData);
        }

        function toggleDrawer(show) {
            document.getElementById('drawer').classList.toggle('open', show);
            document.getElementById('overlay').style.display = show ? 'block' : 'none';
        }

        function setTheme(t) { document.body.setAttribute('data-theme', t); toggleDrawer(false); }

        function sort(mode) {
            if(mode === 'size-h') filteredData.sort((a,b) => parseFloat(b.size) - parseFloat(a.size));
            if(mode === 'size-l') filteredData.sort((a,b) => parseFloat(a.size) - parseFloat(b.size));
            if(mode === 'new') filteredData.reverse();
            renderGrid(filteredData); toggleDrawer(false);
        }

        document.getElementById('main-search').addEventListener('input', (e) => {
            const val = e.target.value.toLowerCase();
            const results = fullData.filter(a => a.name.toLowerCase().includes(val) || (a.keywords && a.keywords.some(k => k.toLowerCase().includes(val))));
            renderGrid(results);
        });

        loadStore();
    </script>
</body>
                                                                                                                                                                           </html>
                                                                                                                                                                           
