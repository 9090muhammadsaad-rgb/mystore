<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Play Store Clone</title>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --ps-green: #01875f;
            --ps-dark: #202124;
            --ps-light-grey: #5f6368;
            --ps-bg: #ffffff;
            --ps-card-hover: #f1f3f4;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Google Sans', sans-serif; }
        
        body { background-color: var(--ps-bg); color: var(--ps-dark); }

        /* --- Header & Search --- */
        header {
            position: sticky; top: 0; z-index: 1000;
            background: #fff; padding: 10px 20px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .search-container {
            max-width: 700px; margin: 0 auto; position: relative;
        }

        .search-box {
            width: 100%; padding: 12px 20px 12px 50px;
            background: #f1f3f4; border: none; border-radius: 8px;
            font-size: 16px; outline: none; transition: 0.2s;
        }

        .search-box:focus { background: #fff; box-shadow: 0 1px 6px rgba(32,33,36,0.28); }

        .search-icon { position: absolute; left: 15px; top: 12px; color: var(--ps-light-grey); }

        /* Suggestions Dropdown */
        #suggestions {
            position: absolute; top: 100%; left: 0; width: 100%;
            background: #fff; border-radius: 0 0 8px 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            display: none; border: 1px solid #e8eaed; border-top: none;
        }

        .sugg-item {
            padding: 12px 20px; cursor: pointer; display: flex; align-items: center;
        }
        .sugg-item:hover { background: #f8f9fa; }
        .sugg-item:before { content: "üîç"; margin-right: 15px; opacity: 0.5; }

        /* --- App Grid --- */
        .container { max-width: 1000px; margin: 20px auto; padding: 0 15px; }
        .grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 25px; margin-top: 20px;
        }

        .app-card {
            cursor: pointer; transition: 0.2s; border-radius: 8px; padding: 10px;
        }
        .app-card:hover { background: var(--ps-card-hover); }
        .app-card img {
            width: 100%; aspect-ratio: 1/1; border-radius: 20%;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1); margin-bottom: 10px;
        }
        .app-name { font-size: 14px; font-weight: 500; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .app-owner { color: var(--ps-light-grey); font-size: 12px; }

        /* --- Modal / Detail View --- */
        #modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #fff; z-index: 2000; display: none; overflow-y: auto;
        }

        .modal-header {
            max-width: 800px; margin: 20px auto; padding: 20px; display: flex; gap: 24px;
        }

        .modal-header img { width: 120px; height: 120px; border-radius: 22px; }

        .install-btn {
            background: var(--ps-green); color: #fff; border: none;
            padding: 10px 40px; border-radius: 8px; font-weight: 500;
            cursor: pointer; font-size: 14px; margin-top: 15px;
        }

        .section-title { font-size: 18px; font-weight: 500; margin: 20px 0 10px; }
        .badge-list { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 20px; }
        .badge { background: #f1f3f4; padding: 5px 12px; border-radius: 15px; font-size: 12px; }

        .close-btn { 
            position: absolute; top: 20px; right: 20px; font-size: 24px; cursor: pointer; background: none; border: none;
        }

        /* Responsive Mobile */
        @media (max-width: 600px) {
            .grid { grid-template-columns: repeat(3, 1fr); gap: 10px; }
            .app-name { font-size: 12px; }
            .modal-header { flex-direction: column; align-items: center; text-align: center; }
        }
    </style>
</head>
<body>

    <header>
        <div class="search-container">
            <span class="search-icon">üîç</span>
            <input type="text" id="search-input" class="search-box" placeholder="Search for apps & games..." autocomplete="off">
            <div id="suggestions"></div>
        </div>
    </header>

    <div class="container">
        <h2 class="section-title">Recommended for you</h2>
        <div class="grid" id="main-grid"></div>
    </div>

    <div id="modal">
        <button class="close-btn" onclick="closeApp()">‚úï</button>
        <div class="modal-header">
            <img id="m-icon" src="" alt="">
            <div>
                <h1 id="m-name"></h1>
                <p id="m-owner" style="color:var(--ps-green); font-weight:500;"></p>
                <div id="m-badges" class="badge-list"></div>
                <button class="install-btn" id="m-install">Install</button>
            </div>
        </div>

        <div style="max-width: 800px; margin: 0 auto; padding: 20px;">
            <div class="section-title">About this app</div>
            <p id="m-desc" style="color:var(--ps-light-grey); line-height: 1.6;"></p>
            
            <div class="section-title">Platform Support</div>
            <div id="m-platforms" class="badge-list"></div>

            <div class="section-title">Data safety</div>
            <div style="border: 1px solid #e8eaed; padding: 15px; border-radius: 8px;">
                <p style="font-size: 13px; color: #5f6368;">Safety starts with understanding how developers collect and share your data. <span style="color:var(--ps-green)">See details</span></p>
            </div>

            <div class="section-title">Similar Games</div>
            <div class="grid" id="recommended-grid"></div>
        </div>
    </div>

    <script>
        let apps = [];
        let keywords = [];

        async function init() {
            try {
                const [resApps, resSearch] = await Promise.all([
                    fetch('info.json?v=' + Date.now()).then(r => r.json()),
                    fetch('search.txt?v=' + Date.now()).then(r => r.text())
                ]);
                apps = resApps;
                keywords = resSearch.split('\n').filter(l => l.trim());
                renderApps(apps);
            } catch (e) { console.error("Data Load Error"); }
        }

        function renderApps(data) {
            const grid = document.getElementById('main-grid');
            grid.innerHTML = data.map(app => `
                <div class="app-card" onclick="openApp(${app.id})">
                    <img src="${app.icon === 'N/A' ? 'https://via.placeholder.com/150' : app.icon}">
                    <div class="app-name">${app.name}</div>
                    <div class="app-owner">${app.category}</div>
                </div>
            `).join('');
        }

        // Search Suggestion Engine
        const input = document.getElementById('search-input');
        const suggBox = document.getElementById('suggestions');

        input.addEventListener('input', (e) => {
            const val = e.target.value.toLowerCase();
            if (val.length > 0) {
                const filtered = keywords.filter(k => k.toLowerCase().includes(val)).slice(0, 5);
                if (filtered.length > 0) {
                    suggBox.innerHTML = filtered.map(k => `<div class="sugg-item" onclick="selectSearch('${k}')">${k}</div>`).join('');
                    suggBox.style.display = 'block';
                } else { suggBox.style.display = 'none'; }
            } else { suggBox.style.display = 'none'; renderApps(apps); }
        });

        function selectSearch(k) {
            input.value = k;
            suggBox.style.display = 'none';
            const filtered = apps.filter(a => a.name.toLowerCase().includes(k.toLowerCase()) || a.category.toLowerCase().includes(k.toLowerCase()));
            renderApps(filtered);
        }

        function openApp(id) {
            const app = apps.find(a => a.id === id);
            document.getElementById('m-icon').src = app.icon;
            document.getElementById('m-name').innerText = app.name;
            document.getElementById('m-owner').innerText = app.owner;
            document.getElementById('m-desc').innerText = app.description;
            
            // Platform Badges (Windows, Mac, Linux etc)
            const platBox = document.getElementById('m-platforms');
            platBox.innerHTML = `
                <span class="badge">Windows</span>
                <span class="badge">Linux</span>
                <span class="badge">macOS</span>
            `;

            const installBtn = document.getElementById('m-install');
            if(app.available) {
                installBtn.innerText = "Install";
                installBtn.style.background = "var(--ps-green)";
                installBtn.onclick = () => window.open(app.versions[0].download);
            } else {
                installBtn.innerText = "Coming Soon";
                installBtn.style.background = "#d93025";
            }

            // Recommended (Play Store Feel)
            const recGrid = document.getElementById('recommended-grid');
            const recApps = apps.filter(a => app.recommended.includes(a.id));
            recGrid.innerHTML = recApps.map(r => `
                <div class="app-card" onclick="openApp(${r.id})">
                    <img src="${r.icon}">
                    <div class="app-name" style="font-size:11px;">${r.name}</div>
                </div>
            `).join('');

            document.getElementById('modal').style.display = 'block';
            window.scrollTo(0,0);
        }

        function closeApp() { document.getElementById('modal').style.display =
        
